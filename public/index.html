<!DOCTYPE html>

<head>
    <title>index - house-of-cards</title>
    <meta content="width=device-width,initial-scale=1,minimal-ui" name="viewport">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Roboto:400,500,700,400italic|Material+Icons">
    <link rel="stylesheet" href="https://unpkg.com/vue-material/dist/vue-material.min.css">
    <link rel="stylesheet" href="https://unpkg.com/vue-material/dist/theme/default.css">
    <link rel="stylesheet" href="/site.css">
</head>

<body>
    <template id="app">
        <md-app md-waterfall md-mode="fixed-last">
            <md-app-toolbar class="md-large md-dense md-primary">
                <div class="md-toolbar-row">
                    <div class="md-toolbar-section-start">
                        <span class="md-title">House of Cards</span>
                    </div>

                    <div class="md-toolbar-section-end">
                        <md-button class="md-icon-button">
                            <md-icon>more_vert</md-icon>
                        </md-button>
                    </div>
                </div>

                <div class="md-toolbar-row">
                    <md-tabs class="md-primary">
                        <md-tab id="tab-gpu" md-label="GPU"></md-tab>
                        <md-tab id="tab-users" md-label="Users"></md-tab>
                    </md-tabs>
                </div>
            </md-app-toolbar>
            <md-app-content>
                <div v-for="machine in machines">
                    <md-content class="md-elevation-6 machine-info-container">
                        <machine-header v-bind:machine-online="machine.status.online" v-bind:title="machine.name">
                        </machine-header>
                        <template v-if="machine.status.online">
                            <div class="md-layout md-gutter gpu-cards-container">
                                <md-card class="md-layout-item md-medium-size-50 md-small-size-100 gpu-card" v-for="(gpu, index) in machine.status.nvidiaStats.gpu"
                                    v-bind:key="gpu._attributes.id">
                                    <md-card-header>
                                        <div class="md-title" :title="gpu._attributes.id">
                                            <md-icon class="icon-gpu">memory</md-icon> GPU {{ index }}
                                        </div>
                                    </md-card-header>

                                    <md-card-content>
                                        <p>GPU utilization: {{gpu.utilization.gpu_util._text}}</p>
                                        <p>Memory utilization: {{gpu.utilization.memory_util._text}}</p>
                                        <p>Power:
                                            {{gpu.power_readings.power_draw._text}}/{{gpu.power_readings.power_limit._text}}
                                        </p>
                                    </md-card-content>
                                </md-card>
                            </div>
                        </template>
                    </md-content>
                </div>
            </md-app-content>
        </md-app>
    </template>

    <script src="https://unpkg.com/vue"></script>
    <script src="https://unpkg.com/vue-material"></script>
    <script src="/spa.js"></script>
</body>